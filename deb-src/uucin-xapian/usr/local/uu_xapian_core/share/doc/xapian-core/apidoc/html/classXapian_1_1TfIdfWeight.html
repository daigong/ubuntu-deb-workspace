<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Xapian: API Documentation: Xapian::TfIdfWeight Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceXapian.html">Xapian</a>      </li>
      <li class="navelem"><a class="el" href="classXapian_1_1TfIdfWeight.html">TfIdfWeight</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Xapian::TfIdfWeight Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="Xapian::TfIdfWeight" --><!-- doxytag: inherits="Xapian::Weight" -->
<p><a class="el" href="classXapian_1_1Weight.html" title="Abstract base class for weighting schemes.">Xapian::Weight</a> subclass implementing the tf-idf weighting scheme.  
 <a href="classXapian_1_1TfIdfWeight.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for Xapian::TfIdfWeight:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classXapian_1_1TfIdfWeight__inherit__graph.png" border="0" usemap="#Xapian_1_1TfIdfWeight_inherit__map" alt="Inheritance graph"/></div>
<map name="Xapian_1_1TfIdfWeight_inherit__map" id="Xapian_1_1TfIdfWeight_inherit__map">
<area shape="rect" href="classXapian_1_1Weight.html" title="Abstract base class for weighting schemes." alt="" coords="17,7,132,33"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classXapian_1_1TfIdfWeight-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1TfIdfWeight.html#a0f7ee36c6a5ca395a5b3877aa6e8830a">TfIdfWeight</a> (const std::string &amp;normalizations)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <a class="el" href="classXapian_1_1TfIdfWeight.html" title="Xapian::Weight subclass implementing the tf-idf weighting scheme.">TfIdfWeight</a>.  <a href="#a0f7ee36c6a5ca395a5b3877aa6e8830a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1TfIdfWeight.html#a1ffb13ddfb0fe4672881231908b57abf">name</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the name of this weighting scheme.  <a href="#a1ffb13ddfb0fe4672881231908b57abf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1TfIdfWeight.html#ad86124c330deb4b2632c57e11f9d4114">serialise</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return this object's parameters serialised as a single string.  <a href="#ad86124c330deb4b2632c57e11f9d4114"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classXapian_1_1TfIdfWeight.html">TfIdfWeight</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1TfIdfWeight.html#a1cb31977a5110decca0114151c7233c8">unserialise</a> (const std::string &amp;s) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Unserialise parameters.  <a href="#a1cb31977a5110decca0114151c7233c8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1TfIdfWeight.html#a03af189cd33d7e14ad70485e46191faf">get_sumpart</a> (<a class="el" href="namespaceXapian.html#a72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a> wdf, <a class="el" href="namespaceXapian.html#a72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a> doclen) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the weight contribution for this object's term to a document.  <a href="#a03af189cd33d7e14ad70485e46191faf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1TfIdfWeight.html#a38d12f5e3235a42891f4be1eb1548416">get_maxpart</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return an upper bound on what <a class="el" href="classXapian_1_1TfIdfWeight.html#a03af189cd33d7e14ad70485e46191faf" title="Calculate the weight contribution for this object&#39;s term to a document.">get_sumpart()</a> can return for any document.  <a href="#a38d12f5e3235a42891f4be1eb1548416"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1TfIdfWeight.html#a0198fa8f6995a945e737c240b83cea64">get_sumextra</a> (<a class="el" href="namespaceXapian.html#a72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a> doclen) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the term-independent weight component for a document.  <a href="#a0198fa8f6995a945e737c240b83cea64"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1TfIdfWeight.html#a843e35f4394536254dcc7ce6f2906b12">get_maxextra</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return an upper bound on what <a class="el" href="classXapian_1_1TfIdfWeight.html#a0198fa8f6995a945e737c240b83cea64" title="Calculate the term-independent weight component for a document.">get_sumextra()</a> can return for any document.  <a href="#a843e35f4394536254dcc7ce6f2906b12"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classXapian_1_1Weight.html" title="Abstract base class for weighting schemes.">Xapian::Weight</a> subclass implementing the tf-idf weighting scheme. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0f7ee36c6a5ca395a5b3877aa6e8830a"></a><!-- doxytag: member="Xapian::TfIdfWeight::TfIdfWeight" ref="a0f7ee36c6a5ca395a5b3877aa6e8830a" args="(const std::string &amp;normalizations)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classXapian_1_1TfIdfWeight.html#a0f7ee36c6a5ca395a5b3877aa6e8830a">Xapian::TfIdfWeight::TfIdfWeight</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>normalizations</em></td><td>)</td>
          <td><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Construct a <a class="el" href="classXapian_1_1TfIdfWeight.html" title="Xapian::Weight subclass implementing the tf-idf weighting scheme.">TfIdfWeight</a>. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">normalizations</td><td>A three character string indicating the normalizations to be used for the tf(wdf), idf and document weight respectively.</td></tr>
  </table>
  </dd>
</dl>
<p>The first character specifies the normalization for the wdf for which the following normalizations are currently available:</p>
<p>'n':None. wdfn=wdf 'b':Boolean wdfn=1 if term in document else wdfn=0 's':Square wdfn=wdf*wdf 'l':Logarithmic wdfn=1+log<sub>e</sub>(wdf)</p>
<p>The Max-wdf and Augmented Max wdf normalizations aren't yet implemented.</p>
<p>The second character indicates the normalization for the idf, the following of which are currently available:</p>
<p>'n':None idfn=1 't':TfIdf idfn=log(N/Termfreq) where N is the number of documents in collection and Termfreq is the number of documents which are indexed by the term t. 'p':Prob idfn=log((N-Termfreq)/Termfreq)</p>
<p>The third and the final character indicates the normalization for the document weight of which the following are currently available:</p>
<p>'n':None wtn=tfn*idfn Implementing more normalizations for the weight requires access to statistics such as the weight of all terms in the document indexed by the term in the query. This is not available from the current backend.</p>
<p>More normalizations for all components can be implemented by changing the backend to acquire the statistics required for the normalizations which are not currently available from <a class="el" href="classXapian_1_1Weight.html" title="Abstract base class for weighting schemes.">Xapian::Weight</a>.</p>
<p>The default string is "ntn". </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a843e35f4394536254dcc7ce6f2906b12"></a><!-- doxytag: member="Xapian::TfIdfWeight::get_maxextra" ref="a843e35f4394536254dcc7ce6f2906b12" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classXapian_1_1TfIdfWeight.html#a843e35f4394536254dcc7ce6f2906b12">Xapian::TfIdfWeight::get_maxextra</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return an upper bound on what <a class="el" href="classXapian_1_1TfIdfWeight.html#a0198fa8f6995a945e737c240b83cea64" title="Calculate the term-independent weight component for a document.">get_sumextra()</a> can return for any document. </p>
<p>This information is used by the matcher to perform various optimisations, so strive to make the bound as tight as possible. </p>

<p>Implements <a class="el" href="classXapian_1_1Weight.html#a019d010275b6e8130a4c5c746fdf32a1">Xapian::Weight</a>.</p>

</div>
</div>
<a class="anchor" id="a38d12f5e3235a42891f4be1eb1548416"></a><!-- doxytag: member="Xapian::TfIdfWeight::get_maxpart" ref="a38d12f5e3235a42891f4be1eb1548416" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classXapian_1_1TfIdfWeight.html#a38d12f5e3235a42891f4be1eb1548416">Xapian::TfIdfWeight::get_maxpart</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return an upper bound on what <a class="el" href="classXapian_1_1TfIdfWeight.html#a03af189cd33d7e14ad70485e46191faf" title="Calculate the weight contribution for this object&#39;s term to a document.">get_sumpart()</a> can return for any document. </p>
<p>This information is used by the matcher to perform various optimisations, so strive to make the bound as tight as possible. </p>

<p>Implements <a class="el" href="classXapian_1_1Weight.html#a791cd50a4ab7f2c4f1d9786433033d79">Xapian::Weight</a>.</p>

</div>
</div>
<a class="anchor" id="a0198fa8f6995a945e737c240b83cea64"></a><!-- doxytag: member="Xapian::TfIdfWeight::get_sumextra" ref="a0198fa8f6995a945e737c240b83cea64" args="(Xapian::termcount doclen) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classXapian_1_1TfIdfWeight.html#a0198fa8f6995a945e737c240b83cea64">Xapian::TfIdfWeight::get_sumextra</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceXapian.html#a72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a>&#160;</td>
          <td class="paramname"><em>doclen</em></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate the term-independent weight component for a document. </p>
<p>The parameter gives information about the document which may be used in the calculations:</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">doclen</td><td>The document's length (unnormalised). </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classXapian_1_1Weight.html#a804b190d2bc2b91fde4726df7b7e1981">Xapian::Weight</a>.</p>

</div>
</div>
<a class="anchor" id="a03af189cd33d7e14ad70485e46191faf"></a><!-- doxytag: member="Xapian::TfIdfWeight::get_sumpart" ref="a03af189cd33d7e14ad70485e46191faf" args="(Xapian::termcount wdf, Xapian::termcount doclen) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classXapian_1_1TfIdfWeight.html#a03af189cd33d7e14ad70485e46191faf">Xapian::TfIdfWeight::get_sumpart</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceXapian.html#a72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a>&#160;</td>
          <td class="paramname"><em>wdf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceXapian.html#a72b5a76dd8cfb7b251fe7986e86390cb">Xapian::termcount</a>&#160;</td>
          <td class="paramname"><em>doclen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculate the weight contribution for this object's term to a document. </p>
<p>The parameters give information about the document which may be used in the calculations:</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">wdf</td><td>The within document frequency of the term in the document. </td></tr>
    <tr><td class="paramname">doclen</td><td>The document's length (unnormalised). </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classXapian_1_1Weight.html#ac092230d914f1c40dc33bbc9f9b8e214">Xapian::Weight</a>.</p>

</div>
</div>
<a class="anchor" id="a1ffb13ddfb0fe4672881231908b57abf"></a><!-- doxytag: member="Xapian::TfIdfWeight::name" ref="a1ffb13ddfb0fe4672881231908b57abf" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classXapian_1_1TfIdfWeight.html#a1ffb13ddfb0fe4672881231908b57abf">Xapian::TfIdfWeight::name</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the name of this weighting scheme. </p>
<p>This name is used by the remote backend. It is passed along with the serialised parameters to the remote server so that it knows which class to create.</p>
<p>Return the full namespace-qualified name of your class here - if your class is called FooWeight, return "FooWeight" from this method (<a class="el" href="classXapian_1_1BM25Weight.html" title="Xapian::Weight subclass implementing the BM25 probabilistic formula.">Xapian::BM25Weight</a> returns "Xapian::BM25Weight" here).</p>
<p>If you don't want to support the remote backend, you can use the default implementation which simply returns an empty string. </p>

<p>Reimplemented from <a class="el" href="classXapian_1_1Weight.html#aafd3b445fb1955aae3d7c32aae3ba7b4">Xapian::Weight</a>.</p>

</div>
</div>
<a class="anchor" id="ad86124c330deb4b2632c57e11f9d4114"></a><!-- doxytag: member="Xapian::TfIdfWeight::serialise" ref="ad86124c330deb4b2632c57e11f9d4114" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classXapian_1_1TfIdfWeight.html#ad86124c330deb4b2632c57e11f9d4114">Xapian::TfIdfWeight::serialise</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return this object's parameters serialised as a single string. </p>
<p>If you don't want to support the remote backend, you can use the default implementation which simply throws <a class="el" href="classXapian_1_1UnimplementedError.html" title="UnimplementedError indicates an attempt to use an unimplemented feature.">Xapian::UnimplementedError</a>. </p>

<p>Reimplemented from <a class="el" href="classXapian_1_1Weight.html#acf568da52a87e6a6786400dbd0a79edf">Xapian::Weight</a>.</p>

</div>
</div>
<a class="anchor" id="a1cb31977a5110decca0114151c7233c8"></a><!-- doxytag: member="Xapian::TfIdfWeight::unserialise" ref="a1cb31977a5110decca0114151c7233c8" args="(const std::string &amp;s) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classXapian_1_1TfIdfWeight.html">TfIdfWeight</a>* <a class="el" href="classXapian_1_1TfIdfWeight.html#a1cb31977a5110decca0114151c7233c8">Xapian::TfIdfWeight::unserialise</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unserialise parameters. </p>
<p>This method unserialises parameters serialised by the <em><a class="el" href="classXapian_1_1TfIdfWeight.html#ad86124c330deb4b2632c57e11f9d4114" title="Return this object&#39;s parameters serialised as a single string.">serialise()</a></em> method and allocates and returns a new object initialised with them.</p>
<p>If you don't want to support the remote backend, you can use the default implementation which simply throws <a class="el" href="classXapian_1_1UnimplementedError.html" title="UnimplementedError indicates an attempt to use an unimplemented feature.">Xapian::UnimplementedError</a>.</p>
<p>Note that the returned object will be deallocated by <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> after use with "delete". If you want to handle the deletion in a special way (for example when wrapping the <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> API for use from another language) then you can define a static <code>operator delete</code> method in your subclass as shown here: <a href="http://trac.xapian.org/ticket/554#comment:1">http://trac.xapian.org/ticket/554#comment:1</a></p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>A string containing the serialised parameters. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classXapian_1_1Weight.html#a031c3e0db3ae50e801b324e71a44c140">Xapian::Weight</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>xapian/<a class="el" href="weight_8h.html">weight.h</a></li>
</ul>
</div><!-- contents -->
<hr>
<address><small>
Documentation for Xapian (version 1.3.1).<br>
Generated on Fri May 3 2013 by
<a href="http://www.doxygen.org/">Doxygen 1.7.6.1</a>.
</small></address>
</body>
</html>
