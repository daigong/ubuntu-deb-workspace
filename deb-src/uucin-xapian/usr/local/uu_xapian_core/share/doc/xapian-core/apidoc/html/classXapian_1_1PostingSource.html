<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Xapian: API Documentation: Xapian::PostingSource Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceXapian.html">Xapian</a>      </li>
      <li class="navelem"><a class="el" href="classXapian_1_1PostingSource.html">PostingSource</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Xapian::PostingSource Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="Xapian::PostingSource" -->
<p>Base class which provides an "external" source of postings.  
 <a href="classXapian_1_1PostingSource.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for Xapian::PostingSource:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classXapian_1_1PostingSource__inherit__graph.png" border="0" usemap="#Xapian_1_1PostingSource_inherit__map" alt="Inheritance graph"/></div>
<map name="Xapian_1_1PostingSource_inherit__map" id="Xapian_1_1PostingSource_inherit__map">
<area shape="rect" href="classXapian_1_1FixedWeightPostingSource.html" title="A posting source which returns a fixed weight for all documents." alt="" coords="220,5,457,32"/><area shape="rect" href="classXapian_1_1ValuePostingSource.html" title="A posting source which generates weights from a value slot." alt="" coords="239,56,439,83"/><area shape="rect" href="classXapian_1_1LatLongDistancePostingSource.html" title="Posting source which returns a weight based on geospatial distance." alt="" coords="507,5,779,32"/><area shape="rect" href="classXapian_1_1ValueMapPostingSource.html" title="A posting source which looks up weights in a map using values as the key." alt="" coords="529,56,756,83"/><area shape="rect" href="classXapian_1_1ValueWeightPostingSource.html" title="A posting source which reads weights from a value slot." alt="" coords="523,107,763,133"/><area shape="rect" href="classXapian_1_1DecreasingValueWeightPostingSource.html" title="Read weights from a value which is known to decrease as docid increases." alt="" coords="828,107,1140,133"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classXapian_1_1PostingSource-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#a5ecf450314e8b266eb9c8fae78e141d3">get_termfreq_min</a> () const =0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A lower bound on the number of documents this object can return.  <a href="#a5ecf450314e8b266eb9c8fae78e141d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#a0d67eda5783f82951d6c56ad7ff4205b">get_termfreq_est</a> () const =0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">An estimate of the number of documents this object can return.  <a href="#a0d67eda5783f82951d6c56ad7ff4205b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#a17de27c84a052c51d62ad498151a4cab">get_termfreq_max</a> () const =0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">An upper bound on the number of documents this object can return.  <a href="#a17de27c84a052c51d62ad498151a4cab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae92ac8f3a6afa46b6225c00614ee25a1"></a><!-- doxytag: member="Xapian::PostingSource::get_maxweight" ref="ae92ac8f3a6afa46b6225c00614ee25a1" args="() const " -->
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#ae92ac8f3a6afa46b6225c00614ee25a1">get_maxweight</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the currently set upper bound on what <a class="el" href="classXapian_1_1PostingSource.html#af50987a31b7f5057c432be3c57540052" title="Return the weight contribution for the current document.">get_weight()</a> can return. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#af50987a31b7f5057c432be3c57540052">get_weight</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the weight contribution for the current document.  <a href="#af50987a31b7f5057c432be3c57540052"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespaceXapian.html#a8fa9094bebe1256a7be935a5ede87a64">Xapian::docid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#a7b1bd1fcd07d69204f70155588ae544a">get_docid</a> () const =0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current docid.  <a href="#a7b1bd1fcd07d69204f70155588ae544a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#a150c4c07ff4e959f448dd8cf840968e8">next</a> (double min_wt)=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance the current position to the next matching document.  <a href="#a150c4c07ff4e959f448dd8cf840968e8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#acf18a9328d8e46c3a759a3a120009607">skip_to</a> (<a class="el" href="namespaceXapian.html#a8fa9094bebe1256a7be935a5ede87a64">Xapian::docid</a> did, double min_wt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance to the specified docid.  <a href="#acf18a9328d8e46c3a759a3a120009607"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#a964696f90b6485bf3c931ccf4546a273">check</a> (<a class="el" href="namespaceXapian.html#a8fa9094bebe1256a7be935a5ede87a64">Xapian::docid</a> did, double min_wt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the specified docid occurs.  <a href="#a964696f90b6485bf3c931ccf4546a273"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#a98831c9fdea1599f588cd9fef51bbeb5">at_end</a> () const =0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the current position is past the last entry in this list.  <a href="#a98831c9fdea1599f588cd9fef51bbeb5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classXapian_1_1PostingSource.html">PostingSource</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#aecd88a39155ec5e04c752360b657f315">clone</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Clone the posting source.  <a href="#aecd88a39155ec5e04c752360b657f315"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#a7b5c506178f996e59ed641ad62520734">name</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of the posting source class.  <a href="#a7b5c506178f996e59ed641ad62520734"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#a6ad26dc173cf1ab175dea945ba2622e0">serialise</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Serialise object parameters into a string.  <a href="#a6ad26dc173cf1ab175dea945ba2622e0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classXapian_1_1PostingSource.html">PostingSource</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#ab3312a9172b1881c354faf3d2d9b585d">unserialise</a> (const std::string &amp;s) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create object given string serialisation returned by <a class="el" href="classXapian_1_1PostingSource.html#a6ad26dc173cf1ab175dea945ba2622e0" title="Serialise object parameters into a string.">serialise()</a>.  <a href="#ab3312a9172b1881c354faf3d2d9b585d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classXapian_1_1PostingSource.html">PostingSource</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#af37dd205b77935d283bce0694e15f0cd">unserialise_with_registry</a> (const std::string &amp;s, const <a class="el" href="classXapian_1_1Registry.html">Registry</a> &amp;registry) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create object given string serialisation returned by <a class="el" href="classXapian_1_1PostingSource.html#a6ad26dc173cf1ab175dea945ba2622e0" title="Serialise object parameters into a string.">serialise()</a>.  <a href="#af37dd205b77935d283bce0694e15f0cd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5">init</a> (const <a class="el" href="classXapian_1_1Database.html">Database</a> &amp;db)=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set this <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> to the start of the list of postings.  <a href="#a81d793170b496022488c15c3508979b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#a47d794241880cc691df1c3a3896d1050">get_description</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a string describing this object.  <a href="#a47d794241880cc691df1c3a3896d1050"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a82e85d6113d9c8e72cbbf4b3362f3fd6"></a><!-- doxytag: member="Xapian::PostingSource::PostingSource" ref="a82e85d6113d9c8e72cbbf4b3362f3fd6" args="()" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#a82e85d6113d9c8e72cbbf4b3362f3fd6">PostingSource</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow subclasses to be instantiated. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1PostingSource.html#a7201a6a189625b17f501561dcc3ea8a1">set_maxweight</a> (double max_weight)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set an upper bound on what <a class="el" href="classXapian_1_1PostingSource.html#af50987a31b7f5057c432be3c57540052" title="Return the weight contribution for the current document.">get_weight()</a> can return from now on.  <a href="#a7201a6a189625b17f501561dcc3ea8a1"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Base class which provides an "external" source of postings. </p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a98831c9fdea1599f588cd9fef51bbeb5"></a><!-- doxytag: member="Xapian::PostingSource::at_end" ref="a98831c9fdea1599f588cd9fef51bbeb5" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool <a class="el" href="classXapian_1_1PostingSource.html#a98831c9fdea1599f588cd9fef51bbeb5">Xapian::PostingSource::at_end</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return true if the current position is past the last entry in this list. </p>
<p>At least one of <em><a class="el" href="classXapian_1_1PostingSource.html#a150c4c07ff4e959f448dd8cf840968e8" title="Advance the current position to the next matching document.">next()</a></em>, <em><a class="el" href="classXapian_1_1PostingSource.html#acf18a9328d8e46c3a759a3a120009607" title="Advance to the specified docid.">skip_to()</a></em> or <em><a class="el" href="classXapian_1_1PostingSource.html#a964696f90b6485bf3c931ccf4546a273" title="Check if the specified docid occurs.">check()</a></em> will be called before this method is first called. </p>

<p>Implemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#ac1913462adbcea9216b04180f62f41a0">Xapian::FixedWeightPostingSource</a>, and <a class="el" href="classXapian_1_1ValuePostingSource.html#a4bb7ea314dbd569f90f89731204cdc40">Xapian::ValuePostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a964696f90b6485bf3c931ccf4546a273"></a><!-- doxytag: member="Xapian::PostingSource::check" ref="a964696f90b6485bf3c931ccf4546a273" args="(Xapian::docid did, double min_wt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool <a class="el" href="classXapian_1_1PostingSource.html#a964696f90b6485bf3c931ccf4546a273">Xapian::PostingSource::check</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceXapian.html#a8fa9094bebe1256a7be935a5ede87a64">Xapian::docid</a>&#160;</td>
          <td class="paramname"><em>did</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>min_wt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if the specified docid occurs. </p>
<p>The caller is required to ensure that the specified document id <em>did</em> actually exists in the database. If it does, it must move to that document id, and return true. If it does not, it may either:</p>
<ul>
<li>return true, having moved to a definite position (including "at_end"), which must be the same position as <a class="el" href="classXapian_1_1PostingSource.html#acf18a9328d8e46c3a759a3a120009607" title="Advance to the specified docid.">skip_to()</a> would have moved to.</li>
</ul>
<p>or</p>
<ul>
<li>return false, having moved to an "indeterminate" position, such that a subsequent call to <a class="el" href="classXapian_1_1PostingSource.html#a150c4c07ff4e959f448dd8cf840968e8" title="Advance the current position to the next matching document.">next()</a> or <a class="el" href="classXapian_1_1PostingSource.html#acf18a9328d8e46c3a759a3a120009607" title="Advance to the specified docid.">skip_to()</a> will move to the next matching position after <em>did</em>.</li>
</ul>
<p>Generally, this method should act like <a class="el" href="classXapian_1_1PostingSource.html#acf18a9328d8e46c3a759a3a120009607" title="Advance to the specified docid.">skip_to()</a> and return true if that can be done at little extra cost.</p>
<p>Otherwise it should simply check if a particular docid is present, returning true if it is, and false if it isn't.</p>
<p>The default implementation calls <a class="el" href="classXapian_1_1PostingSource.html#acf18a9328d8e46c3a759a3a120009607" title="Advance to the specified docid.">skip_to()</a> and always returns true.</p>
<p><a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> will always call <a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5" title="Set this PostingSource to the start of the list of postings.">init()</a> on a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> before calling this for the first time.</p>
<p>Note: in the case of a multi-database search, the docid specified is the docid in the single subdatabase relevant to this posting source. See the <em><a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5" title="Set this PostingSource to the start of the list of postings.">init()</a></em> method for details.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">did</td><td>The document id to check. </td></tr>
    <tr><td class="paramname">min_wt</td><td>The minimum weight contribution that is needed (this is just a hint which subclasses may ignore). </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#acd408e3a5cb1cdd02b0fa382b1afb9aa">Xapian::FixedWeightPostingSource</a>, <a class="el" href="classXapian_1_1DecreasingValueWeightPostingSource.html#a7e4738f89c9ff109acd8a6d6ed0e71c0">Xapian::DecreasingValueWeightPostingSource</a>, <a class="el" href="classXapian_1_1LatLongDistancePostingSource.html#a89b0848c6423fa83ed22f43652e79077">Xapian::LatLongDistancePostingSource</a>, and <a class="el" href="classXapian_1_1ValuePostingSource.html#ab222fd63a80cb7c329b8ab4cc27405b8">Xapian::ValuePostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="aecd88a39155ec5e04c752360b657f315"></a><!-- doxytag: member="Xapian::PostingSource::clone" ref="aecd88a39155ec5e04c752360b657f315" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classXapian_1_1PostingSource.html">PostingSource</a>* <a class="el" href="classXapian_1_1PostingSource.html#aecd88a39155ec5e04c752360b657f315">Xapian::PostingSource::clone</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Clone the posting source. </p>
<p>The clone should inherit the configuration of the parent, but need not inherit the state. ie, the clone does not need to be in the same iteration position as the original: the matcher will always call <a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5" title="Set this PostingSource to the start of the list of postings.">init()</a> on the clone before attempting to move the iterator, or read the information about the current position of the iterator.</p>
<p>This may return NULL to indicate that cloning is not supported. In this case, the <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> may only be used with a single-database search.</p>
<p>The default implementation returns NULL.</p>
<p>Note that the returned object will be deallocated by <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> after use with "delete". If you want to handle the deletion in a special way (for example when wrapping the <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> API for use from another language) then you can define a static <code>operator delete</code> method in your subclass as shown here: <a href="http://trac.xapian.org/ticket/554#comment:1">http://trac.xapian.org/ticket/554#comment:1</a> </p>

<p>Reimplemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#aad5669a2fa3d08bea18d0304823222d4">Xapian::FixedWeightPostingSource</a>, <a class="el" href="classXapian_1_1ValueMapPostingSource.html#a75598085ba9e49e1a2fd0e232d191461">Xapian::ValueMapPostingSource</a>, <a class="el" href="classXapian_1_1DecreasingValueWeightPostingSource.html#afcaba0011386e195aeb81836fd0adc5d">Xapian::DecreasingValueWeightPostingSource</a>, <a class="el" href="classXapian_1_1LatLongDistancePostingSource.html#ae891446cd4551778d45d56f9d7fa1289">Xapian::LatLongDistancePostingSource</a>, and <a class="el" href="classXapian_1_1ValueWeightPostingSource.html#aa157a293a1b54a3d70d1d55f5de26895">Xapian::ValueWeightPostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a47d794241880cc691df1c3a3896d1050"></a><!-- doxytag: member="Xapian::PostingSource::get_description" ref="a47d794241880cc691df1c3a3896d1050" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string <a class="el" href="classXapian_1_1PostingSource.html#a47d794241880cc691df1c3a3896d1050">Xapian::PostingSource::get_description</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return a string describing this object. </p>
<p>This default implementation returns a generic answer. This default it provided to avoid forcing those deriving their own <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> subclass from having to implement this (they may not care what <a class="el" href="classXapian_1_1PostingSource.html#a47d794241880cc691df1c3a3896d1050" title="Return a string describing this object.">get_description()</a> gives for their subclass). </p>

<p>Reimplemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#aeb48203eb1b35190d6bffe351bec38e5">Xapian::FixedWeightPostingSource</a>, <a class="el" href="classXapian_1_1ValueMapPostingSource.html#ae8687a2981841c33bb04f3e28d3d7892">Xapian::ValueMapPostingSource</a>, <a class="el" href="classXapian_1_1DecreasingValueWeightPostingSource.html#ab9ec69881499b156c9317bc9d491ef91">Xapian::DecreasingValueWeightPostingSource</a>, <a class="el" href="classXapian_1_1LatLongDistancePostingSource.html#a4f13d0161ccc0c076f35e85dd6ee7148">Xapian::LatLongDistancePostingSource</a>, and <a class="el" href="classXapian_1_1ValueWeightPostingSource.html#af39ca50c3edcd5b8e2cde72db07a4382">Xapian::ValueWeightPostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a7b1bd1fcd07d69204f70155588ae544a"></a><!-- doxytag: member="Xapian::PostingSource::get_docid" ref="a7b1bd1fcd07d69204f70155588ae544a" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespaceXapian.html#a8fa9094bebe1256a7be935a5ede87a64">Xapian::docid</a> <a class="el" href="classXapian_1_1PostingSource.html#a7b1bd1fcd07d69204f70155588ae544a">Xapian::PostingSource::get_docid</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the current docid. </p>
<p>This method may assume that it will only be called when there is a "current document". See <em><a class="el" href="classXapian_1_1PostingSource.html#af50987a31b7f5057c432be3c57540052" title="Return the weight contribution for the current document.">get_weight()</a></em> for details.</p>
<p>Note: in the case of a multi-database search, the returned docid should be in the single subdatabase relevant to this posting source. See the <em><a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5" title="Set this PostingSource to the start of the list of postings.">init()</a></em> method for details. </p>

<p>Implemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#af565f2685bec715d5cbd489f5acc50a3">Xapian::FixedWeightPostingSource</a>, and <a class="el" href="classXapian_1_1ValuePostingSource.html#a6507d4d1a4119058890d92dfad53f40d">Xapian::ValuePostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a0d67eda5783f82951d6c56ad7ff4205b"></a><!-- doxytag: member="Xapian::PostingSource::get_termfreq_est" ref="a0d67eda5783f82951d6c56ad7ff4205b" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a> <a class="el" href="classXapian_1_1PostingSource.html#a0d67eda5783f82951d6c56ad7ff4205b">Xapian::PostingSource::get_termfreq_est</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>An estimate of the number of documents this object can return. </p>
<p>It must always be true that:</p>
<p><a class="el" href="classXapian_1_1PostingSource.html#a5ecf450314e8b266eb9c8fae78e141d3" title="A lower bound on the number of documents this object can return.">get_termfreq_min()</a> &lt;= <a class="el" href="classXapian_1_1PostingSource.html#a0d67eda5783f82951d6c56ad7ff4205b" title="An estimate of the number of documents this object can return.">get_termfreq_est()</a> &lt;= <a class="el" href="classXapian_1_1PostingSource.html#a17de27c84a052c51d62ad498151a4cab" title="An upper bound on the number of documents this object can return.">get_termfreq_max()</a></p>
<p><a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> will always call <a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5" title="Set this PostingSource to the start of the list of postings.">init()</a> on a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> before calling this for the first time. </p>

<p>Implemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#a3296c3490733ac9f36e2dff0719746a5">Xapian::FixedWeightPostingSource</a>, and <a class="el" href="classXapian_1_1ValuePostingSource.html#add937d003f986ff60119bffbac277d76">Xapian::ValuePostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a17de27c84a052c51d62ad498151a4cab"></a><!-- doxytag: member="Xapian::PostingSource::get_termfreq_max" ref="a17de27c84a052c51d62ad498151a4cab" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a> <a class="el" href="classXapian_1_1PostingSource.html#a17de27c84a052c51d62ad498151a4cab">Xapian::PostingSource::get_termfreq_max</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>An upper bound on the number of documents this object can return. </p>
<p><a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> will always call <a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5" title="Set this PostingSource to the start of the list of postings.">init()</a> on a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> before calling this for the first time. </p>

<p>Implemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#a41f8f0e959f0d7daf5915b7507d4f5df">Xapian::FixedWeightPostingSource</a>, and <a class="el" href="classXapian_1_1ValuePostingSource.html#ac71b845c832955fe708d9ad6dbcf87e5">Xapian::ValuePostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a5ecf450314e8b266eb9c8fae78e141d3"></a><!-- doxytag: member="Xapian::PostingSource::get_termfreq_min" ref="a5ecf450314e8b266eb9c8fae78e141d3" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a> <a class="el" href="classXapian_1_1PostingSource.html#a5ecf450314e8b266eb9c8fae78e141d3">Xapian::PostingSource::get_termfreq_min</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A lower bound on the number of documents this object can return. </p>
<p><a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> will always call <a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5" title="Set this PostingSource to the start of the list of postings.">init()</a> on a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> before calling this for the first time. </p>

<p>Implemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#a42262ab06f7d9d2f3122bc3fb115b23e">Xapian::FixedWeightPostingSource</a>, and <a class="el" href="classXapian_1_1ValuePostingSource.html#a73743991ef0f5a2818d56c94e9e019f4">Xapian::ValuePostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="af50987a31b7f5057c432be3c57540052"></a><!-- doxytag: member="Xapian::PostingSource::get_weight" ref="af50987a31b7f5057c432be3c57540052" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual double <a class="el" href="classXapian_1_1PostingSource.html#af50987a31b7f5057c432be3c57540052">Xapian::PostingSource::get_weight</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the weight contribution for the current document. </p>
<p>This default implementation always returns 0, for convenience when implementing "weight-less" <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> subclasses.</p>
<p>This method may assume that it will only be called when there is a "current document". In detail: <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> will always call <a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5" title="Set this PostingSource to the start of the list of postings.">init()</a> on a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> before calling this for the first time. It will also only call this if the <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> reports that it is pointing to a valid document (ie, it will not call it before calling at least one of <a class="el" href="classXapian_1_1PostingSource.html#a150c4c07ff4e959f448dd8cf840968e8" title="Advance the current position to the next matching document.">next()</a>, <a class="el" href="classXapian_1_1PostingSource.html#acf18a9328d8e46c3a759a3a120009607" title="Advance to the specified docid.">skip_to()</a> or <a class="el" href="classXapian_1_1PostingSource.html#a964696f90b6485bf3c931ccf4546a273" title="Check if the specified docid occurs.">check()</a>, and will ensure that the <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> is not at the end by calling <a class="el" href="classXapian_1_1PostingSource.html#a98831c9fdea1599f588cd9fef51bbeb5" title="Return true if the current position is past the last entry in this list.">at_end()</a>). </p>

<p>Reimplemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#ab225d1fdbf370725049f2e820c4f49db">Xapian::FixedWeightPostingSource</a>, <a class="el" href="classXapian_1_1ValueMapPostingSource.html#a8b506ea4535f907b33a44ef259dad604">Xapian::ValueMapPostingSource</a>, <a class="el" href="classXapian_1_1DecreasingValueWeightPostingSource.html#ac6a6a8d090813e707778596b3766ebd9">Xapian::DecreasingValueWeightPostingSource</a>, <a class="el" href="classXapian_1_1LatLongDistancePostingSource.html#a5c9142b259cdee89195da9c95cb2923c">Xapian::LatLongDistancePostingSource</a>, and <a class="el" href="classXapian_1_1ValueWeightPostingSource.html#abb577b5a1d6fd2892206a1cb2eab416f">Xapian::ValueWeightPostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a81d793170b496022488c15c3508979b5"></a><!-- doxytag: member="Xapian::PostingSource::init" ref="a81d793170b496022488c15c3508979b5" args="(const Database &amp;db)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5">Xapian::PostingSource::init</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classXapian_1_1Database.html">Database</a> &amp;&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set this <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> to the start of the list of postings. </p>
<p>This is called automatically by the matcher prior to each query being processed.</p>
<p>If a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> is used for multiple searches, <em><a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5" title="Set this PostingSource to the start of the list of postings.">init()</a></em> will therefore be called multiple times, and must handle this by using the database passed in the most recent call.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>The database which the <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> should iterate through.</td></tr>
  </table>
  </dd>
</dl>
<p>Note: the database supplied to this method must not be modified: in particular, the reopen() method should not be called on it.</p>
<p>Note: in the case of a multi-database search, a separate <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> will be used for each database (the separate PostingSources will be obtained using <em><a class="el" href="classXapian_1_1PostingSource.html#aecd88a39155ec5e04c752360b657f315" title="Clone the posting source.">clone()</a></em>), and each <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> will be passed one of the sub-databases as the <em>db</em> parameter here. The <em>db</em> parameter will therefore always refer to a single database. All docids passed to, or returned from, the <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> refer to docids in that single database, rather than in the multi-database. </p>

<p>Implemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#a3c9698d1d0d4d47247bd19451e1e2077">Xapian::FixedWeightPostingSource</a>, <a class="el" href="classXapian_1_1ValueMapPostingSource.html#ae76de9cb534e96b7a0cc827d89eea8fc">Xapian::ValueMapPostingSource</a>, <a class="el" href="classXapian_1_1DecreasingValueWeightPostingSource.html#aabbd9d95d77e2aa947377c44d1bb733c">Xapian::DecreasingValueWeightPostingSource</a>, <a class="el" href="classXapian_1_1LatLongDistancePostingSource.html#ac3bb27d2891a9f3a8a2ceee0eaa0e747">Xapian::LatLongDistancePostingSource</a>, <a class="el" href="classXapian_1_1ValueWeightPostingSource.html#ac3844351e28448d1de38fe089d626db4">Xapian::ValueWeightPostingSource</a>, and <a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0">Xapian::ValuePostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a7b5c506178f996e59ed641ad62520734"></a><!-- doxytag: member="Xapian::PostingSource::name" ref="a7b5c506178f996e59ed641ad62520734" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string <a class="el" href="classXapian_1_1PostingSource.html#a7b5c506178f996e59ed641ad62520734">Xapian::PostingSource::name</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Name of the posting source class. </p>
<p>This is used when serialising and unserialising posting sources; for example, for performing remote searches.</p>
<p>If the subclass is in a C++ namespace, the namespace should be included in the name, using "::" as a separator. For example, for a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> subclass called "FooPostingSource" in the "Xapian" namespace the result of this call should be "Xapian::FooPostingSource".</p>
<p>This should only be implemented if <a class="el" href="classXapian_1_1PostingSource.html#a6ad26dc173cf1ab175dea945ba2622e0" title="Serialise object parameters into a string.">serialise()</a> and <a class="el" href="classXapian_1_1PostingSource.html#ab3312a9172b1881c354faf3d2d9b585d" title="Create object given string serialisation returned by serialise().">unserialise()</a> are also implemented. The default implementation returns an empty string.</p>
<p>If this returns an empty string, <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> will assume that <a class="el" href="classXapian_1_1PostingSource.html#a6ad26dc173cf1ab175dea945ba2622e0" title="Serialise object parameters into a string.">serialise()</a> and <a class="el" href="classXapian_1_1PostingSource.html#ab3312a9172b1881c354faf3d2d9b585d" title="Create object given string serialisation returned by serialise().">unserialise()</a> are not implemented. </p>

<p>Reimplemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#a28fc3f906a9b56f8c4ebad2e82d3d531">Xapian::FixedWeightPostingSource</a>, <a class="el" href="classXapian_1_1ValueMapPostingSource.html#a717c8ccd76b95946b07e68e759dcca97">Xapian::ValueMapPostingSource</a>, <a class="el" href="classXapian_1_1DecreasingValueWeightPostingSource.html#a9f1d3ffcfbea32d66ebc690426d9be90">Xapian::DecreasingValueWeightPostingSource</a>, <a class="el" href="classXapian_1_1LatLongDistancePostingSource.html#afc6905fc18c48446c4b6963f406f36ca">Xapian::LatLongDistancePostingSource</a>, and <a class="el" href="classXapian_1_1ValueWeightPostingSource.html#a35d0b218fa9db907c36e62d60b900808">Xapian::ValueWeightPostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a150c4c07ff4e959f448dd8cf840968e8"></a><!-- doxytag: member="Xapian::PostingSource::next" ref="a150c4c07ff4e959f448dd8cf840968e8" args="(double min_wt)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="classXapian_1_1PostingSource.html#a150c4c07ff4e959f448dd8cf840968e8">Xapian::PostingSource::next</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>min_wt</em></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Advance the current position to the next matching document. </p>
<p>The <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> starts before the first entry in the list, so <a class="el" href="classXapian_1_1PostingSource.html#a150c4c07ff4e959f448dd8cf840968e8" title="Advance the current position to the next matching document.">next()</a> must be called before any methods which need the context of the current position.</p>
<p><a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> will always call <a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5" title="Set this PostingSource to the start of the list of postings.">init()</a> on a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> before calling this for the first time.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">min_wt</td><td>The minimum weight contribution that is needed (this is just a hint which subclasses may ignore). </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#a5387052adf96613d7528862ef5ffd3ce">Xapian::FixedWeightPostingSource</a>, <a class="el" href="classXapian_1_1DecreasingValueWeightPostingSource.html#a6b4a3f76964292eb8a04d20059852f3b">Xapian::DecreasingValueWeightPostingSource</a>, <a class="el" href="classXapian_1_1LatLongDistancePostingSource.html#a563dd69bf4113b73aa12335c3e282ae5">Xapian::LatLongDistancePostingSource</a>, and <a class="el" href="classXapian_1_1ValuePostingSource.html#a560f89bad687164dd139f9025d2bb1db">Xapian::ValuePostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a6ad26dc173cf1ab175dea945ba2622e0"></a><!-- doxytag: member="Xapian::PostingSource::serialise" ref="a6ad26dc173cf1ab175dea945ba2622e0" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string <a class="el" href="classXapian_1_1PostingSource.html#a6ad26dc173cf1ab175dea945ba2622e0">Xapian::PostingSource::serialise</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Serialise object parameters into a string. </p>
<p>The serialised parameters should represent the configuration of the posting source, but need not (indeed, should not) represent the current iteration state.</p>
<p>If you don't want to support the remote backend, you can use the default implementation which simply throws <a class="el" href="classXapian_1_1UnimplementedError.html" title="UnimplementedError indicates an attempt to use an unimplemented feature.">Xapian::UnimplementedError</a>. </p>

<p>Reimplemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#ab9f650935d97b18388dd112101336355">Xapian::FixedWeightPostingSource</a>, <a class="el" href="classXapian_1_1ValueMapPostingSource.html#a534c78ecea04a7a649d8ba27447edee3">Xapian::ValueMapPostingSource</a>, <a class="el" href="classXapian_1_1DecreasingValueWeightPostingSource.html#a2d3b48128b61bfd904163706c87065a8">Xapian::DecreasingValueWeightPostingSource</a>, <a class="el" href="classXapian_1_1LatLongDistancePostingSource.html#a95ea67372e92964d6682963a0c881319">Xapian::LatLongDistancePostingSource</a>, and <a class="el" href="classXapian_1_1ValueWeightPostingSource.html#a1bdc574c2f1c02472a4ec5fee697af87">Xapian::ValueWeightPostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a7201a6a189625b17f501561dcc3ea8a1"></a><!-- doxytag: member="Xapian::PostingSource::set_maxweight" ref="a7201a6a189625b17f501561dcc3ea8a1" args="(double max_weight)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classXapian_1_1PostingSource.html#a7201a6a189625b17f501561dcc3ea8a1">Xapian::PostingSource::set_maxweight</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>max_weight</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set an upper bound on what <a class="el" href="classXapian_1_1PostingSource.html#af50987a31b7f5057c432be3c57540052" title="Return the weight contribution for the current document.">get_weight()</a> can return from now on. </p>
<p>This upper bound is used by the matcher to perform various optimisations, so if you can return a good bound, then matches will generally run faster.</p>
<p>This method should be called after calling <a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5" title="Set this PostingSource to the start of the list of postings.">init()</a>, and may be called during iteration if the upper bound drops.</p>
<p>It is valid for the posting source to have returned a higher value from <a class="el" href="classXapian_1_1PostingSource.html#af50987a31b7f5057c432be3c57540052" title="Return the weight contribution for the current document.">get_weight()</a> earlier in the iteration, but the posting source must not return a higher value from <a class="el" href="classXapian_1_1PostingSource.html#af50987a31b7f5057c432be3c57540052" title="Return the weight contribution for the current document.">get_weight()</a> than the currently set upper bound, and the upper bound must not be increased (until <a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5" title="Set this PostingSource to the start of the list of postings.">init()</a> has been called).</p>
<p>If you don't call this method, the upper bound will default to 0, for convenience when implementing "weight-less" <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> subclasses.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">max_weight</td><td>The upper bound to set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="acf18a9328d8e46c3a759a3a120009607"></a><!-- doxytag: member="Xapian::PostingSource::skip_to" ref="acf18a9328d8e46c3a759a3a120009607" args="(Xapian::docid did, double min_wt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void <a class="el" href="classXapian_1_1PostingSource.html#acf18a9328d8e46c3a759a3a120009607">Xapian::PostingSource::skip_to</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceXapian.html#a8fa9094bebe1256a7be935a5ede87a64">Xapian::docid</a>&#160;</td>
          <td class="paramname"><em>did</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>min_wt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Advance to the specified docid. </p>
<p>If the specified docid isn't in the list, position ourselves on the first document after it (or <a class="el" href="classXapian_1_1PostingSource.html#a98831c9fdea1599f588cd9fef51bbeb5" title="Return true if the current position is past the last entry in this list.">at_end()</a> if no greater docids are present).</p>
<p>If the current position is already the specified docid, this method will leave the position unmodified.</p>
<p>If the specified docid is earlier than the current position, the behaviour is unspecified. A sensible behaviour would be to leave the current position unmodified, but it is also reasonable to move to the specified docid.</p>
<p>The default implementation calls <a class="el" href="classXapian_1_1PostingSource.html#a150c4c07ff4e959f448dd8cf840968e8" title="Advance the current position to the next matching document.">next()</a> repeatedly, which works but <a class="el" href="classXapian_1_1PostingSource.html#acf18a9328d8e46c3a759a3a120009607" title="Advance to the specified docid.">skip_to()</a> can often be implemented much more efficiently.</p>
<p><a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> will always call <a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5" title="Set this PostingSource to the start of the list of postings.">init()</a> on a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> before calling this for the first time.</p>
<p>Note: in the case of a multi-database search, the docid specified is the docid in the single subdatabase relevant to this posting source. See the <em><a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5" title="Set this PostingSource to the start of the list of postings.">init()</a></em> method for details.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">did</td><td>The document id to advance to. </td></tr>
    <tr><td class="paramname">min_wt</td><td>The minimum weight contribution that is needed (this is just a hint which subclasses may ignore). </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#a90fc7e7c584e400f2eb1442ac02dfba4">Xapian::FixedWeightPostingSource</a>, <a class="el" href="classXapian_1_1DecreasingValueWeightPostingSource.html#aa70bb8128fa24aa8940bb518c9c01905">Xapian::DecreasingValueWeightPostingSource</a>, <a class="el" href="classXapian_1_1LatLongDistancePostingSource.html#a85e5437efbd9b9e016bc3cd12b41b0db">Xapian::LatLongDistancePostingSource</a>, and <a class="el" href="classXapian_1_1ValuePostingSource.html#a27b5b12089a98975ad29bbcd0922556e">Xapian::ValuePostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="ab3312a9172b1881c354faf3d2d9b585d"></a><!-- doxytag: member="Xapian::PostingSource::unserialise" ref="ab3312a9172b1881c354faf3d2d9b585d" args="(const std::string &amp;s) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classXapian_1_1PostingSource.html">PostingSource</a>* <a class="el" href="classXapian_1_1PostingSource.html#ab3312a9172b1881c354faf3d2d9b585d">Xapian::PostingSource::unserialise</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create object given string serialisation returned by <a class="el" href="classXapian_1_1PostingSource.html#a6ad26dc173cf1ab175dea945ba2622e0" title="Serialise object parameters into a string.">serialise()</a>. </p>
<p>Note that the returned object will be deallocated by <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> after use with "delete". If you want to handle the deletion in a special way (for example when wrapping the <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> API for use from another language) then you can define a static <code>operator delete</code> method in your subclass as shown here: <a href="http://trac.xapian.org/ticket/554#comment:1">http://trac.xapian.org/ticket/554#comment:1</a></p>
<p>If you don't want to support the remote backend, you can use the default implementation which simply throws <a class="el" href="classXapian_1_1UnimplementedError.html" title="UnimplementedError indicates an attempt to use an unimplemented feature.">Xapian::UnimplementedError</a>.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>A serialised instance of this <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> subclass. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classXapian_1_1FixedWeightPostingSource.html#a7d70385221859891b250e526c791ce67">Xapian::FixedWeightPostingSource</a>, <a class="el" href="classXapian_1_1ValueMapPostingSource.html#ab3f716ff004f91e2ecc51548119f3891">Xapian::ValueMapPostingSource</a>, <a class="el" href="classXapian_1_1DecreasingValueWeightPostingSource.html#a5ef4c786055fcfe85ebc99cb98ba8409">Xapian::DecreasingValueWeightPostingSource</a>, and <a class="el" href="classXapian_1_1ValueWeightPostingSource.html#aff018c57b785507a3bba82e85ec7fb63">Xapian::ValueWeightPostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="af37dd205b77935d283bce0694e15f0cd"></a><!-- doxytag: member="Xapian::PostingSource::unserialise_with_registry" ref="af37dd205b77935d283bce0694e15f0cd" args="(const std::string &amp;s, const Registry &amp;registry) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classXapian_1_1PostingSource.html">PostingSource</a>* <a class="el" href="classXapian_1_1PostingSource.html#af37dd205b77935d283bce0694e15f0cd">Xapian::PostingSource::unserialise_with_registry</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classXapian_1_1Registry.html">Registry</a> &amp;&#160;</td>
          <td class="paramname"><em>registry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create object given string serialisation returned by <a class="el" href="classXapian_1_1PostingSource.html#a6ad26dc173cf1ab175dea945ba2622e0" title="Serialise object parameters into a string.">serialise()</a>. </p>
<p>Note that the returned object will be deallocated by <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> after use with "delete". If you want to handle the deletion in a special way (for example when wrapping the <a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> API for use from another language) then you can define a static <code>operator delete</code> method in your subclass as shown here: <a href="http://trac.xapian.org/ticket/554#comment:1">http://trac.xapian.org/ticket/554#comment:1</a></p>
<p>This method is supplied with a <a class="el" href="classXapian_1_1Registry.html" title="Registry for user subclasses.">Registry</a> object, which can be used when unserialising objects contained within the posting source. The default implementation simply calls <a class="el" href="classXapian_1_1PostingSource.html#ab3312a9172b1881c354faf3d2d9b585d" title="Create object given string serialisation returned by serialise().">unserialise()</a> which doesn't take the <a class="el" href="classXapian_1_1Registry.html" title="Registry for user subclasses.">Registry</a> object, so you do not need to implement this method unless you want to take advantage of the <a class="el" href="classXapian_1_1Registry.html" title="Registry for user subclasses.">Registry</a> object when unserialising.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>A serialised instance of this <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> subclass. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classXapian_1_1LatLongDistancePostingSource.html#a093dabd837b9d651fc4de23e96888d19">Xapian::LatLongDistancePostingSource</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>xapian/<a class="el" href="postingsource_8h.html">postingsource.h</a></li>
</ul>
</div><!-- contents -->
<hr>
<address><small>
Documentation for Xapian (version 1.3.1).<br>
Generated on Fri May 3 2013 by
<a href="http://www.doxygen.org/">Doxygen 1.7.6.1</a>.
</small></address>
</body>
</html>
