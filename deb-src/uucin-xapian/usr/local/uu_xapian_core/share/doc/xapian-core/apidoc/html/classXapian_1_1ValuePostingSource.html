<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Xapian: API Documentation: Xapian::ValuePostingSource Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceXapian.html">Xapian</a>      </li>
      <li class="navelem"><a class="el" href="classXapian_1_1ValuePostingSource.html">ValuePostingSource</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">Xapian::ValuePostingSource Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="Xapian::ValuePostingSource" --><!-- doxytag: inherits="Xapian::PostingSource" -->
<p>A posting source which generates weights from a value slot.  
 <a href="classXapian_1_1ValuePostingSource.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for Xapian::ValuePostingSource:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classXapian_1_1ValuePostingSource__inherit__graph.png" border="0" usemap="#Xapian_1_1ValuePostingSource_inherit__map" alt="Inheritance graph"/></div>
<map name="Xapian_1_1ValuePostingSource_inherit__map" id="Xapian_1_1ValuePostingSource_inherit__map">
<area shape="rect" href="classXapian_1_1LatLongDistancePostingSource.html" title="Posting source which returns a weight based on geospatial distance." alt="" coords="467,5,739,32"/><area shape="rect" href="classXapian_1_1ValueMapPostingSource.html" title="A posting source which looks up weights in a map using values as the key." alt="" coords="489,56,716,83"/><area shape="rect" href="classXapian_1_1ValueWeightPostingSource.html" title="A posting source which reads weights from a value slot." alt="" coords="483,107,723,133"/><area shape="rect" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings." alt="" coords="7,56,169,83"/><area shape="rect" href="classXapian_1_1DecreasingValueWeightPostingSource.html" title="Read weights from a value which is known to decrease as docid increases." alt="" coords="788,107,1100,133"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classXapian_1_1ValuePostingSource-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#accbffc6b7f573e9a41fc234a410a1ec3">ValuePostingSource</a> (<a class="el" href="namespaceXapian.html#a94a899651fa920c72ffa9635bde630ea">Xapian::valueno</a> slot_)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <a class="el" href="classXapian_1_1ValuePostingSource.html" title="A posting source which generates weights from a value slot.">ValuePostingSource</a>.  <a href="#accbffc6b7f573e9a41fc234a410a1ec3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#a73743991ef0f5a2818d56c94e9e019f4">get_termfreq_min</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A lower bound on the number of documents this object can return.  <a href="#a73743991ef0f5a2818d56c94e9e019f4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#add937d003f986ff60119bffbac277d76">get_termfreq_est</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">An estimate of the number of documents this object can return.  <a href="#add937d003f986ff60119bffbac277d76"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#ac71b845c832955fe708d9ad6dbcf87e5">get_termfreq_max</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">An upper bound on the number of documents this object can return.  <a href="#ac71b845c832955fe708d9ad6dbcf87e5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#a560f89bad687164dd139f9025d2bb1db">next</a> (double min_wt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance the current position to the next matching document.  <a href="#a560f89bad687164dd139f9025d2bb1db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#a27b5b12089a98975ad29bbcd0922556e">skip_to</a> (<a class="el" href="namespaceXapian.html#a8fa9094bebe1256a7be935a5ede87a64">Xapian::docid</a> min_docid, double min_wt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Advance to the specified docid.  <a href="#a27b5b12089a98975ad29bbcd0922556e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#ab222fd63a80cb7c329b8ab4cc27405b8">check</a> (<a class="el" href="namespaceXapian.html#a8fa9094bebe1256a7be935a5ede87a64">Xapian::docid</a> min_docid, double min_wt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the specified docid occurs.  <a href="#ab222fd63a80cb7c329b8ab4cc27405b8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#a4bb7ea314dbd569f90f89731204cdc40">at_end</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the current position is past the last entry in this list.  <a href="#a4bb7ea314dbd569f90f89731204cdc40"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceXapian.html#a8fa9094bebe1256a7be935a5ede87a64">Xapian::docid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#a6507d4d1a4119058890d92dfad53f40d">get_docid</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current docid.  <a href="#a6507d4d1a4119058890d92dfad53f40d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0">init</a> (const <a class="el" href="classXapian_1_1Database.html">Database</a> &amp;db_)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set this <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> to the start of the list of postings.  <a href="#a764328b2a7085e24393a94eb1d2b91e0"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a24ed690d4249ce0929a1a1ff236124f1"></a><!-- doxytag: member="Xapian::ValuePostingSource::db" ref="a24ed690d4249ce0929a1a1ff236124f1" args="" -->
<a class="el" href="classXapian_1_1Database.html">Xapian::Database</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#a24ed690d4249ce0929a1a1ff236124f1">db</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The database we're reading values from. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aefd7cda358e1dc81ccd72bfe7b0f940c"></a><!-- doxytag: member="Xapian::ValuePostingSource::slot" ref="aefd7cda358e1dc81ccd72bfe7b0f940c" args="" -->
<a class="el" href="namespaceXapian.html#a94a899651fa920c72ffa9635bde630ea">Xapian::valueno</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#aefd7cda358e1dc81ccd72bfe7b0f940c">slot</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The slot we're reading values from. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="addc0e75dc4ad4cfcf1f2d807bc3b32c4"></a><!-- doxytag: member="Xapian::ValuePostingSource::value_it" ref="addc0e75dc4ad4cfcf1f2d807bc3b32c4" args="" -->
<a class="el" href="classXapian_1_1ValueIterator.html">Xapian::ValueIterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#addc0e75dc4ad4cfcf1f2d807bc3b32c4">value_it</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Value stream iterator. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af961be7d3dcc2eb8b9e70744ce2c7597"></a><!-- doxytag: member="Xapian::ValuePostingSource::started" ref="af961be7d3dcc2eb8b9e70744ce2c7597" args="" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#af961be7d3dcc2eb8b9e70744ce2c7597">started</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating if we've started (true if we have). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#a30f64f26a6faddc3f24b8c00e2ba5d0b">termfreq_min</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A lower bound on the term frequency.  <a href="#a30f64f26a6faddc3f24b8c00e2ba5d0b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#ab9b4cc08e1ba2da73f059b2312ae3986">termfreq_est</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">An estimate of the term frequency.  <a href="#ab9b4cc08e1ba2da73f059b2312ae3986"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXapian_1_1ValuePostingSource.html#a3a7be278e6615876d57a254a60826c2f">termfreq_max</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">An upper bound on the term frequency.  <a href="#a3a7be278e6615876d57a254a60826c2f"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A posting source which generates weights from a value slot. </p>
<p>This is a base class for classes which generate weights using values stored in the specified slot. For example, <a class="el" href="classXapian_1_1ValueWeightPostingSource.html" title="A posting source which reads weights from a value slot.">ValueWeightPostingSource</a> uses sortable_unserialise to convert values directly to weights.</p>
<p>The upper bound on the weight returned is set to DBL_MAX. Subclasses should call <a class="el" href="classXapian_1_1PostingSource.html#a7201a6a189625b17f501561dcc3ea8a1" title="Set an upper bound on what get_weight() can return from now on.">set_maxweight()</a> in their <a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0" title="Set this PostingSource to the start of the list of postings.">init()</a> methods after calling <a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0" title="Set this PostingSource to the start of the list of postings.">ValuePostingSource::init()</a> if they know a tighter bound on the weight. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="accbffc6b7f573e9a41fc234a410a1ec3"></a><!-- doxytag: member="Xapian::ValuePostingSource::ValuePostingSource" ref="accbffc6b7f573e9a41fc234a410a1ec3" args="(Xapian::valueno slot_)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classXapian_1_1ValuePostingSource.html#accbffc6b7f573e9a41fc234a410a1ec3">Xapian::ValuePostingSource::ValuePostingSource</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceXapian.html#a94a899651fa920c72ffa9635bde630ea">Xapian::valueno</a>&#160;</td>
          <td class="paramname"><em>slot_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Construct a <a class="el" href="classXapian_1_1ValuePostingSource.html" title="A posting source which generates weights from a value slot.">ValuePostingSource</a>. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">slot_</td><td>The value slot to read values from. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a4bb7ea314dbd569f90f89731204cdc40"></a><!-- doxytag: member="Xapian::ValuePostingSource::at_end" ref="a4bb7ea314dbd569f90f89731204cdc40" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classXapian_1_1ValuePostingSource.html#a4bb7ea314dbd569f90f89731204cdc40">Xapian::ValuePostingSource::at_end</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return true if the current position is past the last entry in this list. </p>
<p>At least one of <em><a class="el" href="classXapian_1_1ValuePostingSource.html#a560f89bad687164dd139f9025d2bb1db" title="Advance the current position to the next matching document.">next()</a></em>, <em><a class="el" href="classXapian_1_1ValuePostingSource.html#a27b5b12089a98975ad29bbcd0922556e" title="Advance to the specified docid.">skip_to()</a></em> or <em><a class="el" href="classXapian_1_1ValuePostingSource.html#ab222fd63a80cb7c329b8ab4cc27405b8" title="Check if the specified docid occurs.">check()</a></em> will be called before this method is first called. </p>

<p>Implements <a class="el" href="classXapian_1_1PostingSource.html#a98831c9fdea1599f588cd9fef51bbeb5">Xapian::PostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="ab222fd63a80cb7c329b8ab4cc27405b8"></a><!-- doxytag: member="Xapian::ValuePostingSource::check" ref="ab222fd63a80cb7c329b8ab4cc27405b8" args="(Xapian::docid min_docid, double min_wt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classXapian_1_1ValuePostingSource.html#ab222fd63a80cb7c329b8ab4cc27405b8">Xapian::ValuePostingSource::check</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceXapian.html#a8fa9094bebe1256a7be935a5ede87a64">Xapian::docid</a>&#160;</td>
          <td class="paramname"><em>did</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>min_wt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if the specified docid occurs. </p>
<p>The caller is required to ensure that the specified document id <em>did</em> actually exists in the database. If it does, it must move to that document id, and return true. If it does not, it may either:</p>
<ul>
<li>return true, having moved to a definite position (including "at_end"), which must be the same position as <a class="el" href="classXapian_1_1ValuePostingSource.html#a27b5b12089a98975ad29bbcd0922556e" title="Advance to the specified docid.">skip_to()</a> would have moved to.</li>
</ul>
<p>or</p>
<ul>
<li>return false, having moved to an "indeterminate" position, such that a subsequent call to <a class="el" href="classXapian_1_1ValuePostingSource.html#a560f89bad687164dd139f9025d2bb1db" title="Advance the current position to the next matching document.">next()</a> or <a class="el" href="classXapian_1_1ValuePostingSource.html#a27b5b12089a98975ad29bbcd0922556e" title="Advance to the specified docid.">skip_to()</a> will move to the next matching position after <em>did</em>.</li>
</ul>
<p>Generally, this method should act like <a class="el" href="classXapian_1_1ValuePostingSource.html#a27b5b12089a98975ad29bbcd0922556e" title="Advance to the specified docid.">skip_to()</a> and return true if that can be done at little extra cost.</p>
<p>Otherwise it should simply check if a particular docid is present, returning true if it is, and false if it isn't.</p>
<p>The default implementation calls <a class="el" href="classXapian_1_1ValuePostingSource.html#a27b5b12089a98975ad29bbcd0922556e" title="Advance to the specified docid.">skip_to()</a> and always returns true.</p>
<p><a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> will always call <a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0" title="Set this PostingSource to the start of the list of postings.">init()</a> on a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> before calling this for the first time.</p>
<p>Note: in the case of a multi-database search, the docid specified is the docid in the single subdatabase relevant to this posting source. See the <em><a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0" title="Set this PostingSource to the start of the list of postings.">init()</a></em> method for details.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">did</td><td>The document id to check. </td></tr>
    <tr><td class="paramname">min_wt</td><td>The minimum weight contribution that is needed (this is just a hint which subclasses may ignore). </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classXapian_1_1PostingSource.html#a964696f90b6485bf3c931ccf4546a273">Xapian::PostingSource</a>.</p>

<p>Reimplemented in <a class="el" href="classXapian_1_1DecreasingValueWeightPostingSource.html#a7e4738f89c9ff109acd8a6d6ed0e71c0">Xapian::DecreasingValueWeightPostingSource</a>, and <a class="el" href="classXapian_1_1LatLongDistancePostingSource.html#a89b0848c6423fa83ed22f43652e79077">Xapian::LatLongDistancePostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a6507d4d1a4119058890d92dfad53f40d"></a><!-- doxytag: member="Xapian::ValuePostingSource::get_docid" ref="a6507d4d1a4119058890d92dfad53f40d" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceXapian.html#a8fa9094bebe1256a7be935a5ede87a64">Xapian::docid</a> <a class="el" href="classXapian_1_1ValuePostingSource.html#a6507d4d1a4119058890d92dfad53f40d">Xapian::ValuePostingSource::get_docid</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the current docid. </p>
<p>This method may assume that it will only be called when there is a "current document". See <em><a class="el" href="classXapian_1_1PostingSource.html#af50987a31b7f5057c432be3c57540052" title="Return the weight contribution for the current document.">get_weight()</a></em> for details.</p>
<p>Note: in the case of a multi-database search, the returned docid should be in the single subdatabase relevant to this posting source. See the <em><a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0" title="Set this PostingSource to the start of the list of postings.">init()</a></em> method for details. </p>

<p>Implements <a class="el" href="classXapian_1_1PostingSource.html#a7b1bd1fcd07d69204f70155588ae544a">Xapian::PostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="add937d003f986ff60119bffbac277d76"></a><!-- doxytag: member="Xapian::ValuePostingSource::get_termfreq_est" ref="add937d003f986ff60119bffbac277d76" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a> <a class="el" href="classXapian_1_1ValuePostingSource.html#add937d003f986ff60119bffbac277d76">Xapian::ValuePostingSource::get_termfreq_est</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>An estimate of the number of documents this object can return. </p>
<p>It must always be true that:</p>
<p><a class="el" href="classXapian_1_1ValuePostingSource.html#a73743991ef0f5a2818d56c94e9e019f4" title="A lower bound on the number of documents this object can return.">get_termfreq_min()</a> &lt;= <a class="el" href="classXapian_1_1ValuePostingSource.html#add937d003f986ff60119bffbac277d76" title="An estimate of the number of documents this object can return.">get_termfreq_est()</a> &lt;= <a class="el" href="classXapian_1_1ValuePostingSource.html#ac71b845c832955fe708d9ad6dbcf87e5" title="An upper bound on the number of documents this object can return.">get_termfreq_max()</a></p>
<p><a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> will always call <a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0" title="Set this PostingSource to the start of the list of postings.">init()</a> on a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> before calling this for the first time. </p>

<p>Implements <a class="el" href="classXapian_1_1PostingSource.html#a0d67eda5783f82951d6c56ad7ff4205b">Xapian::PostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="ac71b845c832955fe708d9ad6dbcf87e5"></a><!-- doxytag: member="Xapian::ValuePostingSource::get_termfreq_max" ref="ac71b845c832955fe708d9ad6dbcf87e5" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a> <a class="el" href="classXapian_1_1ValuePostingSource.html#ac71b845c832955fe708d9ad6dbcf87e5">Xapian::ValuePostingSource::get_termfreq_max</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>An upper bound on the number of documents this object can return. </p>
<p><a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> will always call <a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0" title="Set this PostingSource to the start of the list of postings.">init()</a> on a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> before calling this for the first time. </p>

<p>Implements <a class="el" href="classXapian_1_1PostingSource.html#a17de27c84a052c51d62ad498151a4cab">Xapian::PostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a73743991ef0f5a2818d56c94e9e019f4"></a><!-- doxytag: member="Xapian::ValuePostingSource::get_termfreq_min" ref="a73743991ef0f5a2818d56c94e9e019f4" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a> <a class="el" href="classXapian_1_1ValuePostingSource.html#a73743991ef0f5a2818d56c94e9e019f4">Xapian::ValuePostingSource::get_termfreq_min</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A lower bound on the number of documents this object can return. </p>
<p><a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> will always call <a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0" title="Set this PostingSource to the start of the list of postings.">init()</a> on a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> before calling this for the first time. </p>

<p>Implements <a class="el" href="classXapian_1_1PostingSource.html#a5ecf450314e8b266eb9c8fae78e141d3">Xapian::PostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a764328b2a7085e24393a94eb1d2b91e0"></a><!-- doxytag: member="Xapian::ValuePostingSource::init" ref="a764328b2a7085e24393a94eb1d2b91e0" args="(const Database &amp;db_)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0">Xapian::ValuePostingSource::init</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classXapian_1_1Database.html">Database</a> &amp;&#160;</td>
          <td class="paramname"><em>db</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set this <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> to the start of the list of postings. </p>
<p>This is called automatically by the matcher prior to each query being processed.</p>
<p>If a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> is used for multiple searches, <em><a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0" title="Set this PostingSource to the start of the list of postings.">init()</a></em> will therefore be called multiple times, and must handle this by using the database passed in the most recent call.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>The database which the <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> should iterate through.</td></tr>
  </table>
  </dd>
</dl>
<p>Note: the database supplied to this method must not be modified: in particular, the reopen() method should not be called on it.</p>
<p>Note: in the case of a multi-database search, a separate <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> will be used for each database (the separate PostingSources will be obtained using <em><a class="el" href="classXapian_1_1PostingSource.html#aecd88a39155ec5e04c752360b657f315" title="Clone the posting source.">clone()</a></em>), and each <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> will be passed one of the sub-databases as the <em>db</em> parameter here. The <em>db</em> parameter will therefore always refer to a single database. All docids passed to, or returned from, the <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> refer to docids in that single database, rather than in the multi-database. </p>

<p>Implements <a class="el" href="classXapian_1_1PostingSource.html#a81d793170b496022488c15c3508979b5">Xapian::PostingSource</a>.</p>

<p>Reimplemented in <a class="el" href="classXapian_1_1ValueMapPostingSource.html#ae76de9cb534e96b7a0cc827d89eea8fc">Xapian::ValueMapPostingSource</a>, <a class="el" href="classXapian_1_1DecreasingValueWeightPostingSource.html#aabbd9d95d77e2aa947377c44d1bb733c">Xapian::DecreasingValueWeightPostingSource</a>, <a class="el" href="classXapian_1_1LatLongDistancePostingSource.html#ac3bb27d2891a9f3a8a2ceee0eaa0e747">Xapian::LatLongDistancePostingSource</a>, and <a class="el" href="classXapian_1_1ValueWeightPostingSource.html#ac3844351e28448d1de38fe089d626db4">Xapian::ValueWeightPostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a560f89bad687164dd139f9025d2bb1db"></a><!-- doxytag: member="Xapian::ValuePostingSource::next" ref="a560f89bad687164dd139f9025d2bb1db" args="(double min_wt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classXapian_1_1ValuePostingSource.html#a560f89bad687164dd139f9025d2bb1db">Xapian::ValuePostingSource::next</a> </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>min_wt</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Advance the current position to the next matching document. </p>
<p>The <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> starts before the first entry in the list, so <a class="el" href="classXapian_1_1ValuePostingSource.html#a560f89bad687164dd139f9025d2bb1db" title="Advance the current position to the next matching document.">next()</a> must be called before any methods which need the context of the current position.</p>
<p><a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> will always call <a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0" title="Set this PostingSource to the start of the list of postings.">init()</a> on a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> before calling this for the first time.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">min_wt</td><td>The minimum weight contribution that is needed (this is just a hint which subclasses may ignore). </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classXapian_1_1PostingSource.html#a150c4c07ff4e959f448dd8cf840968e8">Xapian::PostingSource</a>.</p>

<p>Reimplemented in <a class="el" href="classXapian_1_1DecreasingValueWeightPostingSource.html#a6b4a3f76964292eb8a04d20059852f3b">Xapian::DecreasingValueWeightPostingSource</a>, and <a class="el" href="classXapian_1_1LatLongDistancePostingSource.html#a563dd69bf4113b73aa12335c3e282ae5">Xapian::LatLongDistancePostingSource</a>.</p>

</div>
</div>
<a class="anchor" id="a27b5b12089a98975ad29bbcd0922556e"></a><!-- doxytag: member="Xapian::ValuePostingSource::skip_to" ref="a27b5b12089a98975ad29bbcd0922556e" args="(Xapian::docid min_docid, double min_wt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classXapian_1_1ValuePostingSource.html#a27b5b12089a98975ad29bbcd0922556e">Xapian::ValuePostingSource::skip_to</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceXapian.html#a8fa9094bebe1256a7be935a5ede87a64">Xapian::docid</a>&#160;</td>
          <td class="paramname"><em>did</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>min_wt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Advance to the specified docid. </p>
<p>If the specified docid isn't in the list, position ourselves on the first document after it (or <a class="el" href="classXapian_1_1ValuePostingSource.html#a4bb7ea314dbd569f90f89731204cdc40" title="Return true if the current position is past the last entry in this list.">at_end()</a> if no greater docids are present).</p>
<p>If the current position is already the specified docid, this method will leave the position unmodified.</p>
<p>If the specified docid is earlier than the current position, the behaviour is unspecified. A sensible behaviour would be to leave the current position unmodified, but it is also reasonable to move to the specified docid.</p>
<p>The default implementation calls <a class="el" href="classXapian_1_1ValuePostingSource.html#a560f89bad687164dd139f9025d2bb1db" title="Advance the current position to the next matching document.">next()</a> repeatedly, which works but <a class="el" href="classXapian_1_1ValuePostingSource.html#a27b5b12089a98975ad29bbcd0922556e" title="Advance to the specified docid.">skip_to()</a> can often be implemented much more efficiently.</p>
<p><a class="el" href="namespaceXapian.html" title="The Xapian namespace contains public interfaces for the Xapian library.">Xapian</a> will always call <a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0" title="Set this PostingSource to the start of the list of postings.">init()</a> on a <a class="el" href="classXapian_1_1PostingSource.html" title="Base class which provides an &quot;external&quot; source of postings.">PostingSource</a> before calling this for the first time.</p>
<p>Note: in the case of a multi-database search, the docid specified is the docid in the single subdatabase relevant to this posting source. See the <em><a class="el" href="classXapian_1_1ValuePostingSource.html#a764328b2a7085e24393a94eb1d2b91e0" title="Set this PostingSource to the start of the list of postings.">init()</a></em> method for details.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">did</td><td>The document id to advance to. </td></tr>
    <tr><td class="paramname">min_wt</td><td>The minimum weight contribution that is needed (this is just a hint which subclasses may ignore). </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classXapian_1_1PostingSource.html#acf18a9328d8e46c3a759a3a120009607">Xapian::PostingSource</a>.</p>

<p>Reimplemented in <a class="el" href="classXapian_1_1DecreasingValueWeightPostingSource.html#aa70bb8128fa24aa8940bb518c9c01905">Xapian::DecreasingValueWeightPostingSource</a>, and <a class="el" href="classXapian_1_1LatLongDistancePostingSource.html#a85e5437efbd9b9e016bc3cd12b41b0db">Xapian::LatLongDistancePostingSource</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ab9b4cc08e1ba2da73f059b2312ae3986"></a><!-- doxytag: member="Xapian::ValuePostingSource::termfreq_est" ref="ab9b4cc08e1ba2da73f059b2312ae3986" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a> <a class="el" href="classXapian_1_1ValuePostingSource.html#ab9b4cc08e1ba2da73f059b2312ae3986">Xapian::ValuePostingSource::termfreq_est</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>An estimate of the term frequency. </p>
<p>Subclasses should set this if they are overriding the <a class="el" href="classXapian_1_1ValuePostingSource.html#a560f89bad687164dd139f9025d2bb1db" title="Advance the current position to the next matching document.">next()</a>, <a class="el" href="classXapian_1_1ValuePostingSource.html#a27b5b12089a98975ad29bbcd0922556e" title="Advance to the specified docid.">skip_to()</a> or <a class="el" href="classXapian_1_1ValuePostingSource.html#ab222fd63a80cb7c329b8ab4cc27405b8" title="Check if the specified docid occurs.">check()</a> methods. </p>

</div>
</div>
<a class="anchor" id="a3a7be278e6615876d57a254a60826c2f"></a><!-- doxytag: member="Xapian::ValuePostingSource::termfreq_max" ref="a3a7be278e6615876d57a254a60826c2f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a> <a class="el" href="classXapian_1_1ValuePostingSource.html#a3a7be278e6615876d57a254a60826c2f">Xapian::ValuePostingSource::termfreq_max</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>An upper bound on the term frequency. </p>
<p>Subclasses should set this if they are overriding the <a class="el" href="classXapian_1_1ValuePostingSource.html#a560f89bad687164dd139f9025d2bb1db" title="Advance the current position to the next matching document.">next()</a>, <a class="el" href="classXapian_1_1ValuePostingSource.html#a27b5b12089a98975ad29bbcd0922556e" title="Advance to the specified docid.">skip_to()</a> or <a class="el" href="classXapian_1_1ValuePostingSource.html#ab222fd63a80cb7c329b8ab4cc27405b8" title="Check if the specified docid occurs.">check()</a> methods. </p>

</div>
</div>
<a class="anchor" id="a30f64f26a6faddc3f24b8c00e2ba5d0b"></a><!-- doxytag: member="Xapian::ValuePostingSource::termfreq_min" ref="a30f64f26a6faddc3f24b8c00e2ba5d0b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceXapian.html#a7f30aa95f0c42b117dafaf66ba24241d">Xapian::doccount</a> <a class="el" href="classXapian_1_1ValuePostingSource.html#a30f64f26a6faddc3f24b8c00e2ba5d0b">Xapian::ValuePostingSource::termfreq_min</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A lower bound on the term frequency. </p>
<p>Subclasses should set this if they are overriding the <a class="el" href="classXapian_1_1ValuePostingSource.html#a560f89bad687164dd139f9025d2bb1db" title="Advance the current position to the next matching document.">next()</a>, <a class="el" href="classXapian_1_1ValuePostingSource.html#a27b5b12089a98975ad29bbcd0922556e" title="Advance to the specified docid.">skip_to()</a> or <a class="el" href="classXapian_1_1ValuePostingSource.html#ab222fd63a80cb7c329b8ab4cc27405b8" title="Check if the specified docid occurs.">check()</a> methods to return fewer documents. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>xapian/<a class="el" href="postingsource_8h.html">postingsource.h</a></li>
</ul>
</div><!-- contents -->
<hr>
<address><small>
Documentation for Xapian (version 1.3.1).<br>
Generated on Fri May 3 2013 by
<a href="http://www.doxygen.org/">Doxygen 1.7.6.1</a>.
</small></address>
</body>
</html>
