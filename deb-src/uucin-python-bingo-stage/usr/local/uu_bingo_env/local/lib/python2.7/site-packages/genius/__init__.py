#encoding

from .core import CJKTagger,CJKTokenizer
from .loader import load_crf_seg_model, load_crf_pos_model


_seg_nbest, _seg_model = 1, None
def seg_cjk(text, nbest = 1, use_break = True, use_combine = True):
    global _seg_nbest, _seg_model
    if _seg_nbest != nbest or not _seg_model:
        del _seg_model
        _seg_nbest, _seg_model = nbest, load_crf_seg_model(**{'nbest':nbest})
    tokenizer = CJKTokenizer(_seg_model)
    for word in tokenizer.parse(text,use_break,use_combine):
        yield word

_pos_nbest, _pos_model = 1, None
def pos_cjk(word, nbest = 1):
    global _pos_nbest, _pos_model
    if _pos_nbest != nbest or not _pos_model:
        del _pos_model
        _pos_nbest, _pos_model = nbest, load_crf_pos_model(**{'nbest':nbest})
    for tagger in CJKTagger(_pos_model).parse(word):
        yield tagger
